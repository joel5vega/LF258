    1  sudo visudo
    2  vim /etc/sudoers.d
    3  sudo visudo
    4  exit
    5  sudo visudo
    6  exit
    7  ip a
    8  reboot
    9  exit
   10  history
   11  hostname -i
   12  ip a
   13  apt-get update -y && apt-get upgrade -y
   14  sudo -i
   15  kubectl get nodes
   16  netstat |grep LISTen
   17  netstat |grep -I LISTen
   18  netstat |grep -i LISTen
   19  sudo apt install net-tools
   20  netstat |grep -i LISTen
   21  kubectl get nodes
   22  ls $HOME
   23  ls \$HOME/admin.conf
   24  mkdir -p $HOME/.kube
   25  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   26  chown $(id -u):$(id -g) $HOME/.kube/config
   27  sudo chown $(id -u):$(id -g) $HOME/.kube/config
   28  kubectl apply -f calico.yaml
   29  kubectl get nodes
   30  sudo cat /root/ku*
   31  ls /root
   32  sudo ls /root
   33  sudo cat /root/kubeadm-init.out
   34  sudo cat /root/kubeadm-init.out |tail -n 2
   35  sudo cat /root/kubeadm-init.out |tail -n 2 -A 1
   36  sudo cat /root/kubeadm-init.out |tail -n 2
   37  sudo tail -n 2 /root/kubeadm-init.out
   38  ll
   39  sudo ll /root
   40  sudo ls -l /root
   41  date
   42  tzselect 
   43  date
   44  sudo ls -l /root
   45  reboot
   46  sudo reboot
   47  sudo tail -f /root/kubeadm-init.out
   48  cat /etc/kubernetes/
   49  ls /etc/kubernetes/
   50  ls $HOME/.kube
   51  ll $HOME/.kube
   52  rm .kube/config
   53  ll $HOME/.kube
   54  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   55  sudo cp  /etc/kubernetes/admin.conf $HOME/.kube/config
   56  sudo tail -f /root/kubeadm-init.out
   57  ls /etc/kubernetes/admin.conf 
   58  sudo tail -f /root/kubeadm-init.out
   59  kubectl get nodes
   60  sudo tail -f /root/kubeadm-init.out
   61  kubectl get nodes
   62  watch kubectl get nodes
   63  kubectl reset
   64  kubeadm reset
   65  watch kubectl get nodes
   66  sudo apt remove kubectl
   67  sudo apt remove kubectl kubeadm kubelet
   68  sudo apt remove docker
   69  sudo apt remove docker.io 
   70  watch kubectl get nodes
   71  journalctl -xe
   72  watch journalctl -xe
   73  sudo systemctl stop docker
   74  sudo systemctl status docker
   75  sudo apt remove docker.io
   76  sudo apt remove docker
   77  watch journalctl -xe
   78  hostname -i
   79  kubectl get nodes
   80  watch journalctl -xe
   81  sudo apt remove docker
   82  systemctl status docker
   83  reboot
   84  sudo reboot
   85  sudo apt remove kubeadm kubelet kubectl docker* -y
   86  sudo systemctl stop docker
   87  sudo apt remove kubeadm kubelet kubectl docker* -y
   88  sudo apt autoremove
   89  sudo apt remove kubeadm kubelet kubectl docker* -y --allow-changing-held-packages
   90  sudo apt remove kubeadm kubelet kubectl docker*  --allow-changing-held-packages
   91  kubeadm reset
   92  sudo kubeadm reset
   93  sudo apt remove kubeadm kubelet kubectl docker*  --allow-changing-held-packages
   94  sudo apt remove kubeadm kubelet kubectl docker*  -y
   95  sudo apt remove kubeadm kubelet kubectl
   96  systemctl stop docker
   97  ip -a
   98  ip a
   99  hostname -i
  100  watch journalctl -xe
  101  ls
  102  ls -a
  103  ip a|grep glob
  104  hostname
  105  exit
  106  kubect
  107  watch journalctl -xe
  108  kubectl get rs
  109  git status
  110  git init
  111  ls
  112  pwd
  113  git remote add origin https://github.com/joel5vega/LF258.git
  114  git branch -M main
  115  git push -u origin main
  116  git status
  117  git add .
  118  ls
  119  pwd
  120  ls
  121  git add .
  122  git commit  -m "first 6 labs files"
  123  git config --global user.email "joel5vega@gmail.com"
  124  git commit  -m "first 6 labs files"
  125  git push
  126  git push --set-upstream origin master
  127  git status
  128  git add .
  129  git commit -m "init"
  130  git push
  131  vim .gitignore
  132  git add .
  133  git commit -m "remove"
  134  git push
  135  vim .gitignore
  136  git commit -m "remove"
  137  git add .
  138  git commit -m "remove"
  139  git push
  140  vim .gitignore
  141  git add .
  142  git commit -m "remove"
  143  git push
  144  git add .
  145  vim rs.yaml
  146  kubectl create -f rs.yaml
  147  vim rs.yaml
  148  kubectl create -f rs.yaml
  149  kubectl describe rs rs-one
  150  kubectl get pods
  151  kubectl delete rs rs-one --cascade=orphan
  152  kubectl get pods
  153  kubectl create -f rs.yaml
  154  kubectl get rs
  155  kubectl get pods
  156  kubectl edit pod rs-one-v82w
  157  kubectl edit pod rs-one-v892w
  158  kubectl get rs
  159  kubectl get pods
  160  kubectl get po -L system
  161  kubectl delete rs rs-one
  162  kubectl get po -L system
  163  kubectl delete pod -l system=IsolatedPod
  164  git add .
  165  history >lab7-0.txt
  166  git add .
  167  git commit -m "lab 7.0"
  168  git push
  169  cp rs.yaml ds.yaml
  170  vim ds.yaml 
  171  echo Leccion 7.1
  172  kubectl create -f ds.yaml 
  173  echo Leccion 7.1
  174  vim ds.yaml 
  175  kubectl create -f ds.yaml 
  176  vim ds.yaml 
  177  rm ds.yaml 
  178  echo Leccion 7.1
  179  cp rs.yaml ds.yaml
  180  vim ds
  181  vim ds.yaml 
  182  kubectl create -f ds.yaml 
  183  vim ds.yaml 
  184  kubectl create -f ds.yaml 
  185  kubectl get ds
  186  kubectl get pod
  187  kubectl describe pod ds-one-gtzwf |grep Image:
  188  echo 7.3 Rolling updates and rollbacks
  189  kubectl get ds ds-one -o yaml|grep -A 4 Strategy
  190  kubectl edit ds ds-one
  191  kubectl set image ds ds-one ngnix=nginx:1.16.1-alpine
  192  kubectl edit ds ds-one
  193  kubectl set image ds ds-one ngnix=nginx:1.16.1-alpine
  194  kubectl set image ds ds-one ngnix=nginx:1.18.1-alpine
  195  kubectl images
  196  kubectl set image ds ds-one ngnix=nginx:1.18.1-alpine
  197  kubectl set image ds ds-one nginx=nginx:1.18.1-alpine
  198  kubectl describe pod ds-one
  199  kubectl get pds
  200  kubectl describe pods ds-one*
  201  kubectl get pod
  202  kubectl describe pods ds-one-gtzwf
  203  kubectl describe pods ds-one-gtzwf|grep Image
  204  kubectl delete pod ds-one-gtzwf
  205  kubectl describe pods ds-one-gtzwf|grep Image:
  206  kubectl get pods
  207  kubectl describe pods ds-one-67p9p|grep Image:
  208  kubectl get pods
  209  kubectl describe pod ds-one-67p9p
  210  kubectl describe pod ds-one-67p9p|grep Image:
  211  kubectl rollout history ds ds-one
  212  kubectl rollout history ds ds-one --revision=1
  213  kubectl rollout history ds ds-one --revision=2
  214  kubectl rollout undo ds ds-one --to-revision=1
  215  kubectl get pods
  216  kubectl describe pod ds-one-67p9p|grep Image:
  217  kubectl delete pod ds-one-67p9p
  218  kubectl get pods
  219  kubectl describe pod ps-one-jp7p5
  220  kubectl describe pod ds-one-jp7p5
  221  kubectl describe pod ds-one-jp7p5|grep Image
  222  kubectl describe ds|grep Ima
  223  kubectl get ds ds-one -o yaml
  224  kubectl get ds ds-one -o yaml >ds2.yaml
  225  vim ds2.yaml 
  226  kubectl create -f ds2.yaml 
  227  kubectl get pod
  228  kubectl describe pod ds-two-44kx7|grep Im
  229  kubectl edit ds ds-two --record
  230  kubectl get ds ds-two
  231  kubectl get pod
  232  kubectl edit ds ds-two --record
  233  kubectl describe pod ds-two-44kx7|grep Im
  234  kubectl get ds ds-two
  235  kubectl get pod
  236  kubectl edit ds ds-two --record
  237  kubectl get ds ds-two
  238  kubectl get pod
  239  kubectl describe pod ds-two-f92vk
  240  kubectl describe pod ds-two-f92vk|grep Im
  241  kubectl rollout status ds ds-two
  242  kubectl rollout history ds ds-two
  243  kubectl rollout history ds ds-two --revision=4
  244  kubectl delete ds ds-one ds-two
  245  history
  246  history> lab7-0.txt 
  247  git add .
  248  git commit -m "leccion 7"
  249  vim .gitignore
  250  git add .
  251  git commit -m gitignore
  252  git push
  253  ls
  254  git remove
  255  vim .gitignore
  256  git commit -m gitignore
  257  git add 
  258  git add .
  259  git commit -m gitignore
  260  git push
  261  git status
  262  git remove .ssh
  263  ls
  264  ls -a
  265  rm .gitconfig 
  266  l
  267  git status
  268  git restore .
  269  git rm ./ssg
  270  git rm ./ssh
  271  git rm ./ssh/*
  272  git rm .ssh/*
  273  git rm .ssh
  274  git commit -m
  275  git commit -m ssh
  276  git push
  277  git add .
  278  ls
  279  git status
  280  git push
  281  git rm .cache
  282  git rm .cache -r
  283  git rm .kube -r
  284  git rm .vim -r
  285  git status
  286  ls
  287  ls -a
  288  ls 
  289  ls -a
  290  git status
  291  git restore
  292  git restore -r ./ssh
  293  git restore -r .ssh
  294  l
  295  ll
  296  ll -ha
  297  ls .ssh
  298  git status
  299  git restore --staged 
  300  git restore --staged *
  301  git status
  302  ls
  303  ls -a
  304  git restore --staged */.ssh
  305  git restore --staged */.kube
  306  git restore --staged .kube
  307  git status
  308  ls
  309  ls -a
  310  git restore --staged .kube
  311  git restore --staged .kube/*
  312  ls -a
  313  git status
  314  git pull
  315  git status
  316  git reset
  317  ll
  318  ll -a
  319  git reset
  320  git status
  321  git restore
  322  git restore .kube
  323  ll -a
  324  git restore .ssh
  325  git restore .cache
  326  git restore .vim
  327  ll -a
  328  git add .ssh
  329  ll -a
  330  git status
  331  git add .
  332  git commit -m restores
  333  git push
  334  git commit -m restores
  335  vim .gitignore 
  336  git add .
  337  git push
  338  git commit -m ignore
  339  git push
  340  ll -a
  341  vim .gitignore 
  342  git add .
  343  git commit -m ign2
  344  git push
  345  sudo shutdown -h 0
  346  shutdown -h 0
  347  ssh w1
  348  cat /etc/hosts
  349  sudo shutdown -h 0
  350  cd volumes/
  351  ll
  352  vim nfs-pod.yaml 
  353  exit
  354  git add .
  355  git commit -m "8 Volumes lab"
  356  git push
  357  ll
  358  mkdir service_mesh
  359  cd service
  360  cd service_mesh/
  361  vim setupLinkerd.txt
  362  mv setupLinkerd.txt setupLinkerd.sh
  363  sh setupLinkerd.sh
  364  vim setupLinkerd.sh 
  365  sh setupLinkerd.sh
  366  cat ~.bashrc
  367  cat ~/.bashrc
  368  linkerd check --pre
  369  curl -sL run.linkerd.io/install | sh
  370  export PATH=$PATH:/home/joel/.linkerd2/bin
  371  cat ~/.bashrc 
  372  vim ~/.bashrc
  373  linkerd check --pre
  374  linkerd install |kubectl apply -f -
  375  linkerd check
  376  kubectl -n linkerd get configmap/linkerd-config
  377  linkerd check
  378  linkerd check --pre
  379  linkerd check
  380  linkerd install |kubectl apply -f -
  381  linkerd install --crds |kubectl apply -f -
  382  linkerd install |kubectl apply -f -
  383  linkerd check
  384  linkerd install |kubectl apply -f -
  385  linkerd install --set proxyInit.runAsRoot=true |kubectl apply -f -
  386  linkerd check
  387  linkerd viz install |kubectl apply -f
  388  linkerd viz install |kubectl apply -f -
  389  kubectl get pods
  390  linkerd viz install |kubectl apply -f -
  391  linkerd check
  392  kubectl describe pod/linkerd-destination-5f7cff69b6-bjdpj
  393  kubectl get pods
  394  free -h
  395  kubectl get pods --all-namespaces
  396  linkerd -h
  397  linkerd uninstall | kubectl apply -f -
  398  linkerd uninstall
  399  curl -sL run.linkerd.io/install
  400  linkerd uninstall | kubectl apply -f -
  401  linkerd uninstall | grep version
  402  linkerd uninstall | grep -i version
  403  linkerd uninstall --validate=false | kubectl apply -f -
  404  linkerd uninstall | grep -i version --validate=false
  405  linkerd uninstall --validate=false | kubectl apply -f - --validate=false
  406  linkerd uninstall | kubectl apply -f - --validate=false
  407  kubectl get ns
  408  kubectl delete ns linkerd
  409  linkerd install >> linkerd.txt
  410  kubectl get pod  --all-namespaces
  411  kubectl delete pod coredns-64897985d-hjq9q
  412  kubectl por delete coredns-64897985d-hjq9q
  413  kubectl delete pod coredns-64897985d-hjq9q
  414  kubectl delete pod coredns*
  415  kubectl -n kube-system delete pod coredns-64897985d-x9tqw
  416  kubectl get pod  --all-namespaces
  417  kubectl -n kube-system delete pod coredns-64897985d-x9tqw coredns-64897985d-vrjj8
  418  kubectl get pod --all-namespaces
  419  kubectl describe pod coredns-64897985d-78m6k
  420  kubectl pod  describe coredns-64897985d-78m6k
  421  kubectl get pod --all-namespaces
  422  kubectl describe pod coredns-64897985d-78m6k
  423  kubectl -ns kube-system describe pod coredns-64897985d-78m6k
  424  kubectl -n kube-system describe pod coredns-64897985d-78m6k
  425  kubectl -n kube-system get pod coredns-64897985d-78m6k -o yaml
  426  kubectl -n kube-system get configmaps
  427  kubectl get pods --all-namespaces
  428  kubectl -n kube-system delete pod coredns-64897985d-78m6k coredns-64897985d-rdcfq
  429  kubectl -n kube-system log coredns-*
  430  kubectl get pods --all-namespaces
  431  kubectl -n kube-system log coredns-64897985d-gbx97
  432  kubectl log  -n kube-system  coredns-64897985d-gbx97
  433  kubectl -n kube-system log pod coredns-64897985d-gbx97
  434  kubectl logs coredns-64897985d-gbx97
  435  kubectl -n kube-system logs coredns-64897985d-gbx97
  436  kubectl -ns kube-system logs coredns-64897985d-gbx97
  437  kubectl -n kube-system logs 
  438  kubectl get pods --all-namespaces
  439  kubectl -n kube-system logs coredns-64897985d-gbx97
  440  kubectl get configmap --all-namespaces
  441  cd ..
  442  cd service
  443  cd services
  444  ll
  445  kubectl -n accounting get pods
  446  vim nettool.yaml 
  447  kubectl create -f nettool.yaml 
  448  kubectl exec -it nettool -- /bin/bash 
  449  kubectl exec -it ubuntu -- /bin/bash 
  450  kubectl exec -it nettool -- /bin/bash 
  451  kubectl -n kube-system get svc
  452  kubectl  -n kube-system get svc kube-dns -o yaml
  453  kubectl get pod -l k8s-app --all-namespaces
  454  kubectl -n kube-system get pod coredns-64897985d-gbx97
  455  kubectl -n kube-system get pod coredns-64897985d-gbx97 -o yaml
  456  kubectl -n kube-system get configmaps
  457  kubectl -n kube-system get configmaps coredns -o yaml
  458  kubectl -n kube-system edit configmaps coredns
  459  kubectl -n kube-system get pods
  460  kubectl -n kube-system delete pod coredns-64897985d-gbx97 coredns-64897985d-xjq65
  461  kubectl -n kube-system get pods
  462  cd ..
  463  cd service_mesh/
  464  curl -sL run.linkerd.io/install | sh
  465  linkerd check --pre
  466  cat ~/.bashrc 
  467  linkerd check --pre
  468  sudo shutdown -h 0
  469  kubectl get deployments
  470  kubectl get ep
  471  kubectl get ep --all-namespaces
  472  kubectl get pod -o wide}
  473  kubectl get pod -o wide
  474  kubectl get ep web-one
  475  kubectl get ep nginx
  476  kubectl expose deployment/web-one
  477  kubectl get deployments web-one -o yaml > service_mesh/web-one.yaml
  478  kubectl get deployments web-two -o yaml > service_mesh/web-two.yaml
  479  cd service_mesh/
  480  vim web-one.yaml 
  481  vim web-two.yaml 
  482  kubectl delete deployment web-one.yaml 
  483  kubectl delete deployment web-one
  484  kubectl delete deployment web-two
  485  kubectl get deployment
  486  vim web-one.yaml 
  487  vim web-two.yaml 
  488  kubectl create deployment web-one.yaml 
  489  vim web-one.yaml 
  490  kubectl create deployment web-one.yaml 
  491  vim web-one.yaml 
  492  kubectl create -f web-one.yaml 
  493  kubectl create -f web-two.yaml 
  494  kubectl expose deployment/web-one
  495  kubectl expose deployment/web-two
  496  kubectl get ep web-one.yaml 
  497  kubectl get svc
  498  kubectl get ep
  499  kubectl get ep web-one.yaml 
  500  kubectl get ep web-one
  501  kubectl get ep web-two
  502  curl 10.200.190.109
  503  curl 10.200.190.113
  504  echo "both services are created"
  505  helm search hub ingerss
  506  helm search hub ingress
  507  helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
  508  helm repo update
  509  helm fetch ingress-nginx/ingress-nginx --untar
  510  cd ingress-nginx/
  511  ls
  512  vim values.yaml 
  513  helm install myingress .
  514  kubectl get ingress --all-namespaces
  515  kubectl --namespace default get services -o wide -w my-ingress-ingress-nginx-controller
  516  kubectl --namespace default get services -o wide 
  517  kubectl --namespace default get services -o wide -w myingress-ingress-nginx-controller
  518  kubectl get pod --all-namespaces |grep nginx
  519  vim ingress.yaml
  520  kubectl create -f ingress.yaml 
  521  vim ingress.yaml
  522  kubectl create -f ingress.yaml 
  523  kubectl get ingress
  524  kubectl get pod -o wide
  525  kubectl get pod -o wide|grep myingres
  526  curl 10.200.190.114
  527  kubectl get svc | grep ingress
  528  curl 10.101.8.27
  529  curl -H "Host: www.enternal.com" http://10.104.227.79
  530  curl -H "Host: www.external.com" http://10.104.227.79
  531  curl -H "Host: www.external.com" http://10.101.8.27
  532  curl -H  http://10.101.8.27
  533  curl  http://10.101.8.27
  534  ls
  535  ls ..
  536  cat  ../correction.txt 
  537  kubectl get ds myingress-ingress-nginx-controller -o yaml | linkerd inject --ingress --skip-inbound-ports 443 --skip-outbound-ports 443 - | kubectl apply -f -
  538  kubectl get pods -o wide
  539  ip a
  540  kubectl get deployments
  541  kubectl get deployment web-one -o yaml
  542  kubectl get deployment web-one -o yaml|grep image
  543  kubectl get deployment web-two -o yaml|grep image
  544  kubectl exec -it web-one -- /bin/bash
  545  kubectl get pods
  546  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  547  kubectl get deployments
  548  kubectl scale deployment web-one
  549  kubectl scale deployment web-one --replicas=2
  550  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  551  kubectl get deployments
  552  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  553  kubectl get deployments web-one -o yaml
  554  kubectl get pvc
  555  kubectl get pvc --all-namespaces
  556  kubectl edit pvc small
  557  kubectl edit pvc pvc-one
  558  kubectl edit pvc pvc-one -n small
  559  history
  560  kubectl delete deployment web-one
  561  cd ..
  562  vim web-one.yaml 
  563  kubectl delete deployment web-two
  564  kubectl get svc
  565  kubectl get pvc
  566  kubectl get pvc --all-namespaces
  567  kubectl delete pvc pvc-one
  568  kubectl delete pvc pvc-one -n small
  569  kubectl delete namespace small
  570  kubectl create -f web-one.yaml 
  571  kubectl get deployments web-one
  572  kubectl get deployments web-one -o yaml
  573  kubectl expose deployments/web-one
  574  kubectl get ep
  575  kubectl create -f web-two
  576  kubectl get ep
  577  kubectl expose deployment/web-two
  578  kubectl get ep
  579  sudo shutdown -h 0
  580  kubectl get ep
  581  kubectl get deployments
  582  cd service_mesh/
  583  kubectl -f web-two
  584  kubectl create -f web-two.yaml 
  585  history
  586  history>history.txt
    1  sudo visudo
    2  vim /etc/sudoers.d
    3  sudo visudo
    4  exit
    5  sudo visudo
    6  exit
    7  ip a
    8  reboot
    9  exit
   10  history
   11  hostname -i
   12  ip a
   13  apt-get update -y && apt-get upgrade -y
   14  sudo -i
   15  kubectl get nodes
   16  netstat |grep LISTen
   17  netstat |grep -I LISTen
   18  netstat |grep -i LISTen
   19  sudo apt install net-tools
   20  netstat |grep -i LISTen
   21  kubectl get nodes
   22  ls $HOME
   23  ls \$HOME/admin.conf
   24  mkdir -p $HOME/.kube
   25  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   26  chown $(id -u):$(id -g) $HOME/.kube/config
   27  sudo chown $(id -u):$(id -g) $HOME/.kube/config
   28  kubectl apply -f calico.yaml
   29  kubectl get nodes
   30  sudo cat /root/ku*
   31  ls /root
   32  sudo ls /root
   33  sudo cat /root/kubeadm-init.out
   34  sudo cat /root/kubeadm-init.out |tail -n 2
   35  sudo cat /root/kubeadm-init.out |tail -n 2 -A 1
   36  sudo cat /root/kubeadm-init.out |tail -n 2
   37  sudo tail -n 2 /root/kubeadm-init.out
   38  ll
   39  sudo ll /root
   40  sudo ls -l /root
   41  date
   42  tzselect 
   43  date
   44  sudo ls -l /root
   45  reboot
   46  sudo reboot
   47  sudo tail -f /root/kubeadm-init.out
   48  cat /etc/kubernetes/
   49  ls /etc/kubernetes/
   50  ls $HOME/.kube
   51  ll $HOME/.kube
   52  rm .kube/config
   53  ll $HOME/.kube
   54  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   55  sudo cp  /etc/kubernetes/admin.conf $HOME/.kube/config
   56  sudo tail -f /root/kubeadm-init.out
   57  ls /etc/kubernetes/admin.conf 
   58  sudo tail -f /root/kubeadm-init.out
   59  kubectl get nodes
   60  sudo tail -f /root/kubeadm-init.out
   61  kubectl get nodes
   62  watch kubectl get nodes
   63  kubectl reset
   64  kubeadm reset
   65  watch kubectl get nodes
   66  sudo apt remove kubectl
   67  sudo apt remove kubectl kubeadm kubelet
   68  sudo apt remove docker
   69  sudo apt remove docker.io 
   70  watch kubectl get nodes
   71  journalctl -xe
   72  watch journalctl -xe
   73  sudo systemctl stop docker
   74  sudo systemctl status docker
   75  sudo apt remove docker.io
   76  sudo apt remove docker
   77  watch journalctl -xe
   78  hostname -i
   79  kubectl get nodes
   80  watch journalctl -xe
   81  sudo apt remove docker
   82  systemctl status docker
   83  reboot
   84  sudo reboot
   85  sudo apt remove kubeadm kubelet kubectl docker* -y
   86  sudo systemctl stop docker
   87  sudo apt remove kubeadm kubelet kubectl docker* -y
   88  sudo apt autoremove
   89  sudo apt remove kubeadm kubelet kubectl docker* -y --allow-changing-held-packages
   90  sudo apt remove kubeadm kubelet kubectl docker*  --allow-changing-held-packages
   91  kubeadm reset
   92  sudo kubeadm reset
   93  sudo apt remove kubeadm kubelet kubectl docker*  --allow-changing-held-packages
   94  sudo apt remove kubeadm kubelet kubectl docker*  -y
   95  sudo apt remove kubeadm kubelet kubectl
   96  systemctl stop docker
   97  ip -a
   98  ip a
   99  hostname -i
  100  watch journalctl -xe
  101  ls
  102  ls -a
  103  ip a|grep glob
  104  hostname
  105  exit
  106  kubect
  107  watch journalctl -xe
  108  kubectl get rs
  109  git status
  110  git init
  111  ls
  112  pwd
  113  git remote add origin https://github.com/joel5vega/LF258.git
  114  git branch -M main
  115  git push -u origin main
  116  git status
  117  git add .
  118  ls
  119  pwd
  120  ls
  121  git add .
  122  git commit  -m "first 6 labs files"
  123  git config --global user.email "joel5vega@gmail.com"
  124  git commit  -m "first 6 labs files"
  125  git push
  126  git push --set-upstream origin master
  127  git status
  128  git add .
  129  git commit -m "init"
  130  git push
  131  vim .gitignore
  132  git add .
  133  git commit -m "remove"
  134  git push
  135  vim .gitignore
  136  git commit -m "remove"
  137  git add .
  138  git commit -m "remove"
  139  git push
  140  vim .gitignore
  141  git add .
  142  git commit -m "remove"
  143  git push
  144  git add .
  145  vim rs.yaml
  146  kubectl create -f rs.yaml
  147  vim rs.yaml
  148  kubectl create -f rs.yaml
  149  kubectl describe rs rs-one
  150  kubectl get pods
  151  kubectl delete rs rs-one --cascade=orphan
  152  kubectl get pods
  153  kubectl create -f rs.yaml
  154  kubectl get rs
  155  kubectl get pods
  156  kubectl edit pod rs-one-v82w
  157  kubectl edit pod rs-one-v892w
  158  kubectl get rs
  159  kubectl get pods
  160  kubectl get po -L system
  161  kubectl delete rs rs-one
  162  kubectl get po -L system
  163  kubectl delete pod -l system=IsolatedPod
  164  git add .
  165  history >lab7-0.txt
  166  git add .
  167  git commit -m "lab 7.0"
  168  git push
  169  cp rs.yaml ds.yaml
  170  vim ds.yaml 
  171  echo Leccion 7.1
  172  kubectl create -f ds.yaml 
  173  echo Leccion 7.1
  174  vim ds.yaml 
  175  kubectl create -f ds.yaml 
  176  vim ds.yaml 
  177  rm ds.yaml 
  178  echo Leccion 7.1
  179  cp rs.yaml ds.yaml
  180  vim ds
  181  vim ds.yaml 
  182  kubectl create -f ds.yaml 
  183  vim ds.yaml 
  184  kubectl create -f ds.yaml 
  185  kubectl get ds
  186  kubectl get pod
  187  kubectl describe pod ds-one-gtzwf |grep Image:
  188  echo 7.3 Rolling updates and rollbacks
  189  kubectl get ds ds-one -o yaml|grep -A 4 Strategy
  190  kubectl edit ds ds-one
  191  kubectl set image ds ds-one ngnix=nginx:1.16.1-alpine
  192  kubectl edit ds ds-one
  193  kubectl set image ds ds-one ngnix=nginx:1.16.1-alpine
  194  kubectl set image ds ds-one ngnix=nginx:1.18.1-alpine
  195  kubectl images
  196  kubectl set image ds ds-one ngnix=nginx:1.18.1-alpine
  197  kubectl set image ds ds-one nginx=nginx:1.18.1-alpine
  198  kubectl describe pod ds-one
  199  kubectl get pds
  200  kubectl describe pods ds-one*
  201  kubectl get pod
  202  kubectl describe pods ds-one-gtzwf
  203  kubectl describe pods ds-one-gtzwf|grep Image
  204  kubectl delete pod ds-one-gtzwf
  205  kubectl describe pods ds-one-gtzwf|grep Image:
  206  kubectl get pods
  207  kubectl describe pods ds-one-67p9p|grep Image:
  208  kubectl get pods
  209  kubectl describe pod ds-one-67p9p
  210  kubectl describe pod ds-one-67p9p|grep Image:
  211  kubectl rollout history ds ds-one
  212  kubectl rollout history ds ds-one --revision=1
  213  kubectl rollout history ds ds-one --revision=2
  214  kubectl rollout undo ds ds-one --to-revision=1
  215  kubectl get pods
  216  kubectl describe pod ds-one-67p9p|grep Image:
  217  kubectl delete pod ds-one-67p9p
  218  kubectl get pods
  219  kubectl describe pod ps-one-jp7p5
  220  kubectl describe pod ds-one-jp7p5
  221  kubectl describe pod ds-one-jp7p5|grep Image
  222  kubectl describe ds|grep Ima
  223  kubectl get ds ds-one -o yaml
  224  kubectl get ds ds-one -o yaml >ds2.yaml
  225  vim ds2.yaml 
  226  kubectl create -f ds2.yaml 
  227  kubectl get pod
  228  kubectl describe pod ds-two-44kx7|grep Im
  229  kubectl edit ds ds-two --record
  230  kubectl get ds ds-two
  231  kubectl get pod
  232  kubectl edit ds ds-two --record
  233  kubectl describe pod ds-two-44kx7|grep Im
  234  kubectl get ds ds-two
  235  kubectl get pod
  236  kubectl edit ds ds-two --record
  237  kubectl get ds ds-two
  238  kubectl get pod
  239  kubectl describe pod ds-two-f92vk
  240  kubectl describe pod ds-two-f92vk|grep Im
  241  kubectl rollout status ds ds-two
  242  kubectl rollout history ds ds-two
  243  kubectl rollout history ds ds-two --revision=4
  244  kubectl delete ds ds-one ds-two
  245  history
  246  history> lab7-0.txt 
  247  git add .
  248  git commit -m "leccion 7"
  249  vim .gitignore
  250  git add .
  251  git commit -m gitignore
  252  git push
  253  ls
  254  git remove
  255  vim .gitignore
  256  git commit -m gitignore
  257  git add 
  258  git add .
  259  git commit -m gitignore
  260  git push
  261  git status
  262  git remove .ssh
  263  ls
  264  ls -a
  265  rm .gitconfig 
  266  l
  267  git status
  268  git restore .
  269  git rm ./ssg
  270  git rm ./ssh
  271  git rm ./ssh/*
  272  git rm .ssh/*
  273  git rm .ssh
  274  git commit -m
  275  git commit -m ssh
  276  git push
  277  git add .
  278  ls
  279  git status
  280  git push
  281  git rm .cache
  282  git rm .cache -r
  283  git rm .kube -r
  284  git rm .vim -r
  285  git status
  286  ls
  287  ls -a
  288  ls 
  289  ls -a
  290  git status
  291  git restore
  292  git restore -r ./ssh
  293  git restore -r .ssh
  294  l
  295  ll
  296  ll -ha
  297  ls .ssh
  298  git status
  299  git restore --staged 
  300  git restore --staged *
  301  git status
  302  ls
  303  ls -a
  304  git restore --staged */.ssh
  305  git restore --staged */.kube
  306  git restore --staged .kube
  307  git status
  308  ls
  309  ls -a
  310  git restore --staged .kube
  311  git restore --staged .kube/*
  312  ls -a
  313  git status
  314  git pull
  315  git status
  316  git reset
  317  ll
  318  ll -a
  319  git reset
  320  git status
  321  git restore
  322  git restore .kube
  323  ll -a
  324  git restore .ssh
  325  git restore .cache
  326  git restore .vim
  327  ll -a
  328  git add .ssh
  329  ll -a
  330  git status
  331  git add .
  332  git commit -m restores
  333  git push
  334  git commit -m restores
  335  vim .gitignore 
  336  git add .
  337  git push
  338  git commit -m ignore
  339  git push
  340  ll -a
  341  vim .gitignore 
  342  git add .
  343  git commit -m ign2
  344  git push
  345  sudo shutdown -h 0
  346  shutdown -h 0
  347  ssh w1
  348  cat /etc/hosts
  349  sudo shutdown -h 0
  350  cd volumes/
  351  ll
  352  vim nfs-pod.yaml 
  353  exit
  354  git add .
  355  git commit -m "8 Volumes lab"
  356  git push
  357  ll
  358  mkdir service_mesh
  359  cd service
  360  cd service_mesh/
  361  vim setupLinkerd.txt
  362  mv setupLinkerd.txt setupLinkerd.sh
  363  sh setupLinkerd.sh
  364  vim setupLinkerd.sh 
  365  sh setupLinkerd.sh
  366  cat ~.bashrc
  367  cat ~/.bashrc
  368  linkerd check --pre
  369  curl -sL run.linkerd.io/install | sh
  370  export PATH=$PATH:/home/joel/.linkerd2/bin
  371  cat ~/.bashrc 
  372  vim ~/.bashrc
  373  linkerd check --pre
  374  linkerd install |kubectl apply -f -
  375  linkerd check
  376  kubectl -n linkerd get configmap/linkerd-config
  377  linkerd check
  378  linkerd check --pre
  379  linkerd check
  380  linkerd install |kubectl apply -f -
  381  linkerd install --crds |kubectl apply -f -
  382  linkerd install |kubectl apply -f -
  383  linkerd check
  384  linkerd install |kubectl apply -f -
  385  linkerd install --set proxyInit.runAsRoot=true |kubectl apply -f -
  386  linkerd check
  387  linkerd viz install |kubectl apply -f
  388  linkerd viz install |kubectl apply -f -
  389  kubectl get pods
  390  linkerd viz install |kubectl apply -f -
  391  linkerd check
  392  kubectl describe pod/linkerd-destination-5f7cff69b6-bjdpj
  393  kubectl get pods
  394  free -h
  395  kubectl get pods --all-namespaces
  396  linkerd -h
  397  linkerd uninstall | kubectl apply -f -
  398  linkerd uninstall
  399  curl -sL run.linkerd.io/install
  400  linkerd uninstall | kubectl apply -f -
  401  linkerd uninstall | grep version
  402  linkerd uninstall | grep -i version
  403  linkerd uninstall --validate=false | kubectl apply -f -
  404  linkerd uninstall | grep -i version --validate=false
  405  linkerd uninstall --validate=false | kubectl apply -f - --validate=false
  406  linkerd uninstall | kubectl apply -f - --validate=false
  407  kubectl get ns
  408  kubectl delete ns linkerd
  409  linkerd install >> linkerd.txt
  410  kubectl get pod  --all-namespaces
  411  kubectl delete pod coredns-64897985d-hjq9q
  412  kubectl por delete coredns-64897985d-hjq9q
  413  kubectl delete pod coredns-64897985d-hjq9q
  414  kubectl delete pod coredns*
  415  kubectl -n kube-system delete pod coredns-64897985d-x9tqw
  416  kubectl get pod  --all-namespaces
  417  kubectl -n kube-system delete pod coredns-64897985d-x9tqw coredns-64897985d-vrjj8
  418  kubectl get pod --all-namespaces
  419  kubectl describe pod coredns-64897985d-78m6k
  420  kubectl pod  describe coredns-64897985d-78m6k
  421  kubectl get pod --all-namespaces
  422  kubectl describe pod coredns-64897985d-78m6k
  423  kubectl -ns kube-system describe pod coredns-64897985d-78m6k
  424  kubectl -n kube-system describe pod coredns-64897985d-78m6k
  425  kubectl -n kube-system get pod coredns-64897985d-78m6k -o yaml
  426  kubectl -n kube-system get configmaps
  427  kubectl get pods --all-namespaces
  428  kubectl -n kube-system delete pod coredns-64897985d-78m6k coredns-64897985d-rdcfq
  429  kubectl -n kube-system log coredns-*
  430  kubectl get pods --all-namespaces
  431  kubectl -n kube-system log coredns-64897985d-gbx97
  432  kubectl log  -n kube-system  coredns-64897985d-gbx97
  433  kubectl -n kube-system log pod coredns-64897985d-gbx97
  434  kubectl logs coredns-64897985d-gbx97
  435  kubectl -n kube-system logs coredns-64897985d-gbx97
  436  kubectl -ns kube-system logs coredns-64897985d-gbx97
  437  kubectl -n kube-system logs 
  438  kubectl get pods --all-namespaces
  439  kubectl -n kube-system logs coredns-64897985d-gbx97
  440  kubectl get configmap --all-namespaces
  441  cd ..
  442  cd service
  443  cd services
  444  ll
  445  kubectl -n accounting get pods
  446  vim nettool.yaml 
  447  kubectl create -f nettool.yaml 
  448  kubectl exec -it nettool -- /bin/bash 
  449  kubectl exec -it ubuntu -- /bin/bash 
  450  kubectl exec -it nettool -- /bin/bash 
  451  kubectl -n kube-system get svc
  452  kubectl  -n kube-system get svc kube-dns -o yaml
  453  kubectl get pod -l k8s-app --all-namespaces
  454  kubectl -n kube-system get pod coredns-64897985d-gbx97
  455  kubectl -n kube-system get pod coredns-64897985d-gbx97 -o yaml
  456  kubectl -n kube-system get configmaps
  457  kubectl -n kube-system get configmaps coredns -o yaml
  458  kubectl -n kube-system edit configmaps coredns
  459  kubectl -n kube-system get pods
  460  kubectl -n kube-system delete pod coredns-64897985d-gbx97 coredns-64897985d-xjq65
  461  kubectl -n kube-system get pods
  462  cd ..
  463  cd service_mesh/
  464  curl -sL run.linkerd.io/install | sh
  465  linkerd check --pre
  466  cat ~/.bashrc 
  467  linkerd check --pre
  468  sudo shutdown -h 0
  469  kubectl get deployments
  470  kubectl get ep
  471  kubectl get ep --all-namespaces
  472  kubectl get pod -o wide}
  473  kubectl get pod -o wide
  474  kubectl get ep web-one
  475  kubectl get ep nginx
  476  kubectl expose deployment/web-one
  477  kubectl get deployments web-one -o yaml > service_mesh/web-one.yaml
  478  kubectl get deployments web-two -o yaml > service_mesh/web-two.yaml
  479  cd service_mesh/
  480  vim web-one.yaml 
  481  vim web-two.yaml 
  482  kubectl delete deployment web-one.yaml 
  483  kubectl delete deployment web-one
  484  kubectl delete deployment web-two
  485  kubectl get deployment
  486  vim web-one.yaml 
  487  vim web-two.yaml 
  488  kubectl create deployment web-one.yaml 
  489  vim web-one.yaml 
  490  kubectl create deployment web-one.yaml 
  491  vim web-one.yaml 
  492  kubectl create -f web-one.yaml 
  493  kubectl create -f web-two.yaml 
  494  kubectl expose deployment/web-one
  495  kubectl expose deployment/web-two
  496  kubectl get ep web-one.yaml 
  497  kubectl get svc
  498  kubectl get ep
  499  kubectl get ep web-one.yaml 
  500  kubectl get ep web-one
  501  kubectl get ep web-two
  502  curl 10.200.190.109
  503  curl 10.200.190.113
  504  echo "both services are created"
  505  helm search hub ingerss
  506  helm search hub ingress
  507  helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
  508  helm repo update
  509  helm fetch ingress-nginx/ingress-nginx --untar
  510  cd ingress-nginx/
  511  ls
  512  vim values.yaml 
  513  helm install myingress .
  514  kubectl get ingress --all-namespaces
  515  kubectl --namespace default get services -o wide -w my-ingress-ingress-nginx-controller
  516  kubectl --namespace default get services -o wide 
  517  kubectl --namespace default get services -o wide -w myingress-ingress-nginx-controller
  518  kubectl get pod --all-namespaces |grep nginx
  519  vim ingress.yaml
  520  kubectl create -f ingress.yaml 
  521  vim ingress.yaml
  522  kubectl create -f ingress.yaml 
  523  kubectl get ingress
  524  kubectl get pod -o wide
  525  kubectl get pod -o wide|grep myingres
  526  curl 10.200.190.114
  527  kubectl get svc | grep ingress
  528  curl 10.101.8.27
  529  curl -H "Host: www.enternal.com" http://10.104.227.79
  530  curl -H "Host: www.external.com" http://10.104.227.79
  531  curl -H "Host: www.external.com" http://10.101.8.27
  532  curl -H  http://10.101.8.27
  533  curl  http://10.101.8.27
  534  ls
  535  ls ..
  536  cat  ../correction.txt 
  537  kubectl get ds myingress-ingress-nginx-controller -o yaml | linkerd inject --ingress --skip-inbound-ports 443 --skip-outbound-ports 443 - | kubectl apply -f -
  538  kubectl get pods -o wide
  539  ip a
  540  kubectl get deployments
  541  kubectl get deployment web-one -o yaml
  542  kubectl get deployment web-one -o yaml|grep image
  543  kubectl get deployment web-two -o yaml|grep image
  544  kubectl exec -it web-one -- /bin/bash
  545  kubectl get pods
  546  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  547  kubectl get deployments
  548  kubectl scale deployment web-one
  549  kubectl scale deployment web-one --replicas=2
  550  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  551  kubectl get deployments
  552  kubectl exec -it web-one-75b9cd5878-8snkx -- /bin/bash
  553  kubectl get deployments web-one -o yaml
  554  kubectl get pvc
  555  kubectl get pvc --all-namespaces
  556  kubectl edit pvc small
  557  kubectl edit pvc pvc-one
  558  kubectl edit pvc pvc-one -n small
  559  history
  560  kubectl delete deployment web-one
  561  cd ..
  562  vim web-one.yaml 
  563  kubectl delete deployment web-two
  564  kubectl get svc
  565  kubectl get pvc
  566  kubectl get pvc --all-namespaces
  567  kubectl delete pvc pvc-one
  568  kubectl delete pvc pvc-one -n small
  569  kubectl delete namespace small
  570  kubectl create -f web-one.yaml 
  571  kubectl get deployments web-one
  572  kubectl get deployments web-one -o yaml
  573  kubectl expose deployments/web-one
  574  kubectl get ep
  575  kubectl create -f web-two
  576  kubectl get ep
  577  kubectl expose deployment/web-two
  578  kubectl get ep
  579  sudo shutdown -h 0
  580  kubectl get nodes
  581  kubectl get nodes --all-namespaces
  582  watch kubectl get nodes --all-namespaces
  583  kubectl get pods --all-namespaces
  584  watch kubectl get nodes --all-namespaces
  585  sudo shutdown -r 0
  586  watch kubectl get nodes 
  587  kubectl get nodes
  588  watch kubectl get nodes 
  589  kubectl describe w1
  590  kubectl describe node w1
  591  watch kubectl get nodes 
  592  kubectl describe node w1
  593  kubectl get nodes
  594  cat /etc/hosts
  595  kubectl get nodes
  596  kubectl describe node w1
  597  sudo journalctl -u kubelet --all|tail
  598  kubectl describe node w1
  599  kubectl get nodes
  600  kubectl get pods  -n kube-system -o wide
  601  kubectl describe pod calico-node-d92rr -n kube-system
  602  kubectl get nodes
  603  kubectl logs calico-node-d92rr -n kube-system
  604  kubectl get pods
  605  kubectl get pods --all-namespaces
  606  kubectl describe node w1|more
  607  sudo shutdown -h 0
  608  kubectl get nodes
  609  sudo shutdown -h 0
  610  df -h
  611  kubectl get nodes
  612  systemctl status kubectl
  613  kubectl get nodes
  614  kubectl describe w1
  615  kubectl describe node w1
  616  kubectl get nodes
  617  kubectl describe node w1
  618  kubectl describe node w13
  619  kubectl describe node w1
  620  kubectl get nodes
  621  kubectl describe node w1
  622  kubectl describe node w1 -o yaml
  623  kubectl describe node w1
  624  kubectl get nodes
  625  kubectl describe node w1
  626  kubectl get nodes
  627  SD -H
  628  df -h
  629  kubectl get nodes
  630  kubectl describe node w1
  631  kubectl get deployments
  632  kubectl get deployments --all-namespaces
  633  kubectl get deployments --all-namespaces -o wide
  634  sudo reboot now
  635  journalct -xe
  636  journalctl -xe
  637  df -h
  638  kubectl get nodes
  639  kubectl -n accounting get svc
  640  curl 10.108.83.140
  641  curl 10.102.83.140
  642  kubectl -n accounting scale deploy nginx-one --replicas=5
  643  kubectl get pods -A
  644  cd service_mesh/
  645  kubectl get ingress -A
  646  kubectl get pod -o wide|grep myingress
  647  curl 10.200.19091
  648  curl 10.200.190.91
  649  kubectl get svc
  650  kubectl describe svc myingress-ingress-nginx-controller
  651  curl -H "Host: www.external.com" 10.200.190.91
  652  cat correction.txt 
  653  kubectl get ds myingress-ingress-nginx-controller -o yaml | linkerd inject --ingress --skip-inbound-ports 443 --skip-outbound-ports 443 - | kubectl apply -f - 
  654* 
  655  curl 10.106.200.209
  656  curl 10.99.67.241
  657  kubectl get pods
  658  kubectl exec -it web-one-75b9cd5878-7zv4z -- /bin/bash
  659  kubectl edit ingress ingress-test
  660  kubectl get svc
  661  curl 10.99.67.241
  662  curl 10.106.200.209
  663  curl -H "Host: internal.org" http://10.106.200.209
  664  kubectl edit ingress ingress-test
  665  kubectl get ingress
  666  curl -H "Host: www.external.com" 10.200.190.91
  667  kubectl get pods
  668  kubectl get pods -o wide
  669  curl -H "Host: www.external.com" 10.200.190.91
  670  curl -H "Host: internal.org" 10.200.190.91
  671  history>>history.txt 
